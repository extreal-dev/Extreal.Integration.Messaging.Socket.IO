services:
    messaging-redis:
        image: redis:7.0.10-alpine
        container_name: messaging-redis
        restart: always
        expose:
            - '${REDIS_PORT:-6379}'
        tty: true
    messaging:
        build: .
        container_name: messaging
        init: true
        restart: always
        tty: true
        env_file: ${PWD}/.env
        ports:
         - 3030:3030
        expose:
            - ${APP_PORT:-3030}
            - ${API_PORT:-3031}
            - ${REDIS_HOST:-localhost}
            - ${REDIS_PORT:-6379}
        depends_on:
            - messaging-redis
